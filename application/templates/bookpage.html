{%  extends "layout.html"  %}


{% block content %}

          
<!-- end slider section -->
<!-- we_do -->  <br> <br>
<div class="we_do" id="whatwedo">
  <div class="container">
     <div class="row">
        <div class="col-md-12">  
           <div class="titlepage text_align_center">
           
              <h2>Book Selection </h2>
           </div>
        </div>
     </div>
     <div class="row">
        <div class="col-md-12">
           <div id="we1" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                 <li data-target="#we1" data-slide-to="0" class="active"></li>
                 <li data-target="#we1" data-slide-to="1"></li>
                 <li data-target="#we1" data-slide-to="2"></li>
         
              </ol>
              <div class="carousel-inner">
                 <div class="carousel-item active">
                    <div class="container-fluid" style="text-align: center;">
                      <b style="color: black;">Hello <b style="color: red;"> {{ name }}</b>  , Welcome to the Magic Book Club!! We are super excited you are here. <br> Select a book below that you think you might enjoy </b> <hr>
                   
                 <b style="color: red;">Please Note!!</b> <b>If you don't see a book image the fault is from the publisher. The publishing site doesn't have the right book image for display. Please bear with us</b>
                 <hr> </div>
                 </div>  
                 
                 
                 <div class="row">
                  {% for key2, value2 in data.imageUrlL.items() %}
                
                  <div class="col-md-3">
                     <div id="ho_nf" class="portfolio_main text_align_left"  style="min-height: 70;  height: 70; justify-content: center;" >
                        <figure>
                           <img src="{{ value2 }}"  style="z-index: 100; max-height: 70;" width="100%", height="50" alt="The book oooo"/> <p><b style="z-index: 50;"></b></p><br>
                         
                  
    
      </b>  
      <div style="justify-content: center; display: flex;">    <b>Book Index: 
           <input type="text" style="color: red;" name="book"  id="value-{{key2}}" value="{{key2}}" size="6" maxlength="6"><br>
       <form method="POST",  action="/postbookselect">
         <input type="text" id="datavariable" name="book" style="width: 0; border-color: white;" value="{{key2}}" >
           <input type="submit" id ="submit-{{key2}}" value="View Book" style="border-radius: 10px;">       
      </form> 
   </div>
  <hr>
                        </figure>
                     </div>
                  </div>

                  <script>
                     var book_select = document.getElementById('value-{{key2}}');
                     var submitbutton = document.getElementById('submit-{{key2}}');

                  
                  
                     submitbutton.onclick =   function(){
                        
                         book_index = document.getElementById('value-{{key2}}').value;
                         console.log(book_index)
                         document.getElementById("datavaruable").value = book_select;
                       
                         fetch('/api/book_select/' + book_index).then(function(response) {
                  
                             response.json().then(function(data){
                  
                         if (data.error) {
                             $('#errorAlert').text(data.error).show();
                             $('#successAlert').hide();
                             
                             
                         }
                         else {
                             console.log(data.message)
                             console.log(data.link)
                            
                      
                             
                             
       
                         }
                     });
                             });
                  
                  
                     }
                  </script>
                  {% endfor %}
                 </div>
            
            
           
            
                
                  
               </div>
                             
                          </div>
                       </div>
                    </div>
                 </div> 
                 
      <hr>
     

      <div style="justify-content: center; display: flex;">
        <a class="read_more" href="{{ url_for ('books') }}" style="border-radius: 129px; text-shadow: 2px 1px #000000;"> Load More Books </a>
     </div>

              </div>
              <a class="carousel-control-prev" href="#we1" role="button" data-slide="prev">
              <i class="fa fa-angle-left" aria-hidden="true"></i>
              <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#we1" role="button" data-slide="next">
              <i class="fa fa-angle-right" aria-hidden="true"></i>
              <span class="sr-only">Next</span>
              </a>
           </div>
        </div>
     </div>
  </div>
</div>




{% endblock %}